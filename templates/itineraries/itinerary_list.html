{% extends "base.html" %}
{% block title %}Roteiros | Travel Agency{% endblock %}

{% block content %}
  <h1 class="text-2xl font-bold mb-6">✈️ Roteiros de Viagem</h1>

  <form method="get" class="mb-4 flex flex-wrap gap-2">
    <select name="country" class="border px-2 py-1 rounded">
      <option value="">Todos os países</option>
      {% for c in countries %}
        <option value="{{ c.cca2 }}" {% if request.GET.country == c.cca2 %}selected{% endif %}>
          {{ c.name }}
        </option>
      {% endfor %}
    </select>

    <input type="date" name="start_date" value="{{ request.GET.start_date }}" class="border px-2 py-1 rounded">
    <input type="date" name="end_date" value="{{ request.GET.end_date }}" class="border px-2 py-1 rounded">

    <button type="submit" class="bg-blue-600 text-white px-3 py-1 rounded">Filtrar</button>
  </form>

  <ul class="space-y-2">
    {% for itinerary in itineraries %}
      <li class="p-3 bg-white rounded shadow hover:shadow-md flex justify-between">
        <a href="{% url 'itinerary_detail' itinerary.id %}">
          {{ itinerary.title }} - {{ itinerary.country.name }}
        </a>
        <a href="{% url 'itinerary_update' itinerary.id %}" class="text-blue-600 hover:underline">Editar</a>
      </li>
    {% empty %}
      <li class="text-gray-500">Nenhum roteiro encontrado.</li>
    {% endfor %}
  </ul>
{% endblock %}